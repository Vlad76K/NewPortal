<!--  наследуемся от шаблона default.html, который мы создавали для flatpages -->
{% extends 'flatpages/default.html' %}

{% load custom_filters %}
{% load custom_tags %}

<!-- Название у нас будет posts -->
{% block title %}
Posts
{% endblock title %}

<!-- В контенте на странице мы выводим все посты -->
{% block content %}
   <h1><span style = "color: blue"> Новости для Вас </span></h1>
   <span style = "color: red"> Всего новостей/статей: {{ news|length }} ------ Текущая дата: {% current_time '%b %d %Y %A' %}</span>
   <!-- Если в переменной next_sale будет None,
   то выведется указанный в фильтре текст -->
   <h5><span style = "color: magenta"> {{ next_action|default_if_none:"Чуть позже сообщим о новой акции!" }} </span></h5>
   <br>
   {% if news %}
      {% for serv in object_list %}
          <!-- Выводим заголовок-->
          <tr><td><h3>{{ serv.post_title|censor }}</h3></td></tr>
          <!-- Выводим автора -->
          <!--<td><h4>{{ serv.post_author.author_user }}</h4></td>-->
          <!-- Выводим дату публикации -->
          <tr><td><h5>Дата публикации: {{ serv.post_date|date:"d.m.Y" }}</h5></td></tr>
          <!-- Выводим 20 символов текста статьи -->
          <tr><td>{{ serv.preview|censor|truncatewords:20 }}</td></tr>
          <br><br>
      {% endfor %}
   {% else %}
      <h2>Новостей нет!</h2>
   {% endif %}
{% endblock content %}